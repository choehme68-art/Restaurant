<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bella Vista - Speisekarte</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='%232c5530' d='M8.1 13.34l2.83-2.83L3.91 3.5c-1.56 1.56-1.56 4.09 0 5.66l4.19 4.18zm6.78-1.81c1.53.71 3.68.21 5.27-1.38 1.91-1.91 2.28-4.65.81-6.12-1.46-1.46-4.2-1.1-6.12.81-1.59 1.59-2.09 3.74-1.38 5.27L3.7 19.87l1.41 1.41L12 14.41l6.88 6.88 1.41-1.41L13.41 13l1.47-1.47z'/></svg>" type="image/svg+xml">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background-color: #f8f8f8;
            color: #333;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: calc(100vh - 200px);
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: relative;
            border: 2px solid #2c5530;
        }

        h1 {
            color: #2c5530;
            margin-bottom: 10px;
        }

        .header-phone {
            margin-top: 10px;
            font-size: 1.1em;
            color: #2c5530;
            font-weight: bold;
        }

        .delivery-banner {
            margin-top: 8px;
            font-size: 0.9em;
            color: #27ae60;
            font-weight: bold;
            background: #e8f5e8;
            padding: 5px 15px;
            border-radius: 15px;
            display: inline-block;
            border: 1px solid #27ae60;
        }

        .language-switcher {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            right: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
            background: white;
            border: 2px solid #27ae60;
            border-radius: 8px;
            padding: 10px 15px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 2px 8px rgba(39, 174, 96, 0.3);
        }

        .language-switcher:hover {
            background: #f0f7f0;
            box-shadow: 0 4px 12px rgba(39, 174, 96, 0.4);
            transform: translateY(-50%) translateY(-1px);
        }

        .maps-container {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            left: 20px;
            width: 200px;
            height: 150px;
            border: 2px solid #27ae60;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(39, 174, 96, 0.3);
        }

        .maps-container iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        .lang-icon {
            font-size: 1.4em;
        }

        .lang-label {
            font-weight: bold;
            color: #27ae60;
            font-size: 0.95em;
        }

        .lang-dropdown {
            position: relative;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .lang-select {
            border: none;
            background: transparent;
            font-size: 1em;
            font-weight: bold;
            color: #2c5530;
            cursor: pointer;
            outline: none;
            padding: 0;
            padding-right: 5px;
        }

        .lang-select option {
            padding: 8px;
            font-size: 1em;
        }

        .dropdown-arrow {
            color: #27ae60;
            font-size: 0.7em;
            pointer-events: none;
        }

        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            align-items: center;
        }

        .control-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 15px;
            background: white;
            border: 2px solid #2c5530;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
            flex: 1;
            min-width: 120px;
        }

        .control-item select, .control-item input {
            border: none;
            background: none;
            outline: none;
            width: 100%;
            font-size: 14px;
            cursor: pointer;
        }

        .control-item:hover {
            background: #f0f7f0;
        }

        .cart-control {
            background: white;
            border: 2px solid #2c5530;
            border-radius: 8px;
            padding: 10px 15px;
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            min-width: 140px;
            justify-content: center;
        }

        .cart-control:hover {
            background: #2c5530;
            color: white;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .menu-item {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            position: relative;
            border: 2px solid #e8f5e8;
        }

        .menu-item-number {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #2c5530;
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9em;
        }

        .price {
            font-weight: bold;
            color: #e74c3c;
            font-size: 1.2em;
            margin: 10px 0;
        }

        .description {
            color: #666;
            margin-bottom: 10px;
            font-size: 0.9em;
        }

        .menu-item .ingredients-label {
            font-weight: bold;
            color: #2c5530;
            margin: 8px 0 5px 0;
            font-size: 0.9em;
        }

        .menu-item .ingredients {
            color: #666;
            font-size: 0.85em;
            margin-bottom: 10px;
            line-height: 1.4;
        }

        .tags {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
            margin-bottom: 10px;
        }

        .tag {
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.8em;
            background: #f0f0f0;
            transition: all 0.3s;
        }

        .tag.vegetarisch { background: #d1ecf1; color: #0c5460; }
        .tag.scharf { background: #f8d7da; color: #721c24; }
        .tag.ohne-Schweinefleisch { background: #d4edda; color: #155724; }
        .tag.vegan { background: #e8f6f3; color: #0b5345; }
        .tag.laktosefrei { background: #fef9e7; color: #7d6608; }

        .tag:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .cart-indicator {
            background: #d4edda;
            color: #155724;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.8em;
        }

        .popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .popup-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .close-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 24px;
            cursor: pointer;
            background: none;
            border: none;
            color: #666;
        }

        .popup-image {
            width: 100%;
            height: 200px;
            background: #eee;
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            overflow: hidden;
            position: relative;
        }
        
        .popup-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .photo-type-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.7em;
            font-weight: bold;
        }

        .size-selection {
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            border: 1px solid #e9ecef;
        }

        .size-selection h4 {
            margin-bottom: 15px;
            color: #2c5530;
            text-align: center;
        }

        .size-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .size-option {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .size-option:hover {
            border-color: #2c5530;
        }

        .size-option.selected {
            border-color: #2c5530;
            background: #f0f7f0;
        }

        .size-option input[type="radio"] {
            margin-right: 10px;
            transform: scale(1.2);
        }

        .size-label {
            flex: 1;
            font-weight: bold;
        }

        .size-price {
            font-weight: bold;
            color: #e74c3c;
            font-size: 1.1em;
        }

        .size-description {
            font-size: 0.9em;
            color: #666;
            margin-left: 25px;
            margin-top: 2px;
        }

        .cart-popup-btn {
            width: 100%;
            padding: 12px;
            background: #2c5530;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 15px;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-weight: bold;
            transition: background 0.3s;
        }

        .cart-popup-btn:disabled {
            background: #cccccc;
            cursor: not-allowed;
        }

        .cart-popup-btn:hover:not(:disabled) {
            background: #1e3a23;
        }

        .cart-popup-btn.added {
            background: #27ae60;
        }

        .allergens-section {
            margin: 20px 0 0 0;
            padding: 15px 0 0 0;
            border-top: 2px solid #e9ecef;
        }

        .allergens-section h4 {
            color: #2c5530;
            margin-bottom: 10px;
            font-size: 0.95em;
        }

        .allergen-item {
            padding: 3px 0;
            color: #666;
            font-size: 0.85em;
        }

        .additives-section {
            margin: 15px 0 0 0;
            padding: 15px 0 0 0;
            border-top: 1px solid #e9ecef;
        }

        .additives-section h4 {
            color: #2c5530;
            margin-bottom: 10px;
            font-size: 0.95em;
        }

        .additive-item {
            padding: 3px 0;
            color: #666;
            font-size: 0.85em;
        }

        .cart-view {
            display: none;
        }

        .back-btn {
            padding: 10px 20px;
            background: #666;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin-bottom: 20px;
        }
        
        .cart-summary {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .cart-total {
            font-size: 1.5em;
            font-weight: bold;
            color: #2c5530;
            text-align: right;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px solid #eee;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: white;
            margin-bottom: 10px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            position: relative;
            gap: 15px;
        }

        .cart-item-info {
            flex: 1;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .cart-item-name {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .cart-item-size {
            font-size: 0.9em;
            color: #666;
        }

        .cart-item-price {
            color: #e74c3c;
            font-weight: bold;
            font-size: 1.1em;
            min-width: 80px;
            text-align: right;
            margin-right: 15px;
        }

        .cart-item-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            min-width: 120px;
            justify-content: flex-end;
        }

        .quantity-btn {
            padding: 8px 12px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            min-width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .quantity-btn.remove {
            background: #e74c3c;
        }

        .item-quantity {
            font-weight: bold;
            min-width: 30px;
            text-align: center;
            font-size: 1.1em;
        }

        .cart-item-number {
            background: #2c5530;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.8em;
            flex-shrink: 0;
        }

        .phone-btn {
            width: 100%;
            padding: 15px;
            background: #27ae60;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
            transition: background 0.3s;
            text-decoration: none;
            display: block;
            text-align: center;
        }

        .phone-btn:hover {
            background: #219a52;
        }

        .phone-info {
            text-align: center;
            margin-top: 10px;
            color: #666;
            font-size: 0.9em;
        }

        footer {
            background: #2c5530;
            color: white;
            padding: 20px 0;
            margin-top: 40px;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: center;
            gap: 60px;
            flex-wrap: wrap;
        }

        .footer-section {
            min-width: 250px;
        }

        .footer-bottom {
            text-align: center;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        .scroll-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            background: #2c5530;
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: none;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            transition: all 0.3s;
            z-index: 1000;
        }

        .scroll-to-top:hover {
            background: #1e3a23;
            transform: translateY(-3px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        @media (max-width: 768px) {
            .menu-grid {
                grid-template-columns: 1fr;
            }
            
            .controls {
                flex-direction: column;
            }
            
            .control-item, .cart-control {
                width: 100%;
            }

            .cart-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .cart-item-controls {
                width: 100%;
                justify-content: space-between;
            }

            .cart-item-price {
                text-align: left;
                margin-right: 0;
            }

            .maps-container {
                position: static;
                transform: none;
                width: 100%;
                height: 200px;
                margin: 15px 0;
            }

            .language-switcher {
                position: static;
                transform: none;
                margin: 15px auto;
                width: fit-content;
            }

            .language-switcher:hover {
                transform: none;
            }

            .lang-icon {
                font-size: 1.2em;
            }

            .size-options {
                gap: 8px;
            }

            .size-option {
                padding: 10px 12px;
            }

            .scroll-to-top {
                bottom: 20px;
                right: 20px;
                width: 45px;
                height: 45px;
                font-size: 18px;
            }

            .language-switcher {
                position: static;
                margin: 10px auto 0;
                justify-content: center;
                padding: 8px 12px;
                transform: none;
            }

            .language-switcher:hover {
                transform: none;
            }
        }

        .no-items {
            text-align: center;
            padding: 40px;
            color: #666;
            font-size: 1.1em;
        }

        .confirmation-popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }

        .confirmation-content {
            background: white;
            padding: 25px;
            border-radius: 12px;
            max-width: 400px;
            width: 90%;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        }

        .confirmation-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }

        .confirm-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        .confirm-ok {
            background: #27ae60;
            color: white;
        }

        .confirm-ok:hover {
            background: #219a52;
        }

        .confirm-no {
            background: #e74c3c;
            color: white;
        }

        .confirm-no:hover {
            background: #c0392b;
        }
    </style>
</head>
<body>
    <button class="scroll-to-top" id="scrollToTopBtn" title="Nach oben scrollen">↑</button>

    <div class="container">
        <header>
            <div class="maps-container">
                <iframe 
                    src="https://maps.google.com/maps?q=Weststrasse+181,+44866+Bochum+Wattenscheid&output=embed"
                    allowfullscreen=""
                    loading="lazy"
                    referrerpolicy="no-referrer-when-downgrade">
                </iframe>
            </div>
            <div class="language-switcher">
                <span class="lang-icon">🌐</span>
                <span class="lang-label" id="langLabel">Sprache</span>
                <div class="lang-dropdown">
                    <select class="lang-select" id="languageSelect">
                        <option value="de">🇩🇪 Deutsch</option>
                        <option value="en">🇬🇧 English</option>
                        <option value="tr">🇹🇷 Türkçe</option>
                        <option value="ar">🇸🇦 العربية</option>
                        <option value="ru">🇷🇺 Русский</option>
                    </select>
                    <span class="dropdown-arrow">▼</span>
                </div>
            </div>
            <h1 id="restaurantName">🍝 Bella Vista</h1>
            <p id="headerWelcome">Willkommen zu unserer digitalen Speisekarte</p>
            <div class="header-phone" id="headerPhone">📞 02327 303687</div>
            <div class="delivery-banner" id="deliveryBanner">🚗 Lieferung möglich</div>
        </header>

        <div class="controls" id="mainControls">
            <div class="control-item">
                <span>📋</span>
                <select id="categoryFilter">
                    <option value="all">Alle Kategorien</option>
                    <option value="pizza">Pizza</option>
                    <option value="nudeln">Nudeln</option>
                    <option value="salate">Salate</option>
                    <option value="gyros">Gyros</option>
                </select>
            </div>
            <div class="control-item">
                <span>⭐</span>
                <select id="specialWishesFilter">
                    <option value="all">Alle Sonderwünsche</option>
                    <option value="vegetarisch">Vegetarisch</option>
                    <option value="scharf">Scharf</option>
                </select>
            </div>
            <div class="control-item">
                <span>🔍</span>
                <input type="text" id="searchInput" placeholder="Gerichte suchen...">
            </div>
            <div class="cart-control" id="showCart">
                <span>🛒</span>
                <span id="cartLabel">Warenkorb (<span id="cartCount">0</span>)</span>
            </div>
        </div>

        <div class="menu-view" id="menuView">
            <div class="menu-grid" id="menuGrid">
            </div>
        </div>

        <div class="cart-view" id="cartView">
            <button class="back-btn" id="backToMenu">← Zurück zur Karte</button>
            <h2 id="cartTitle">Ihr Warenkorb</h2>
            
            <div class="cart-summary">
                <div id="cartItems">
                </div>
                <div class="cart-total" id="cartTotal">
                    Gesamt: € 0,00
                </div>
            </div>
            
            <a href="tel:02327303687" class="phone-btn" id="cartPhoneBtn">📞 Jetzt anrufen & bestellen: 02327 303687</a>
            <div class="phone-info" id="phoneInfo">Beim Klick auf den Button werden Sie verbunden</div>
        </div>
    </div>

    <footer id="restaurantFooter">
        <div class="footer-content">
            <div class="footer-section">
                <h3 id="footerRestaurantName">Bella Vista</h3>
                <p id="footerAddress">Weststraße 181</p>
                <p id="footerZipCity">44866 Bochum Wattenscheid</p>
            </div>
            <div class="footer-section">
                <h3 id="footerHoursTitle">Öffnungszeiten</h3>
                <div id="footerHours">
                    <p>Mo: 11:30 - 14:30 Uhr & 17:00 - 22:30 Uhr</p>
                    <p>Di - Fr: 11:30 - 22:30 Uhr</p>
                    <p>Sa, So, Feiertage: 15:00 - 22:30 Uhr</p>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p id="footerCopyright">&copy; 2025 Bella Vista. Alle Rechte vorbehalten.</p>
        </div>
    </footer>

    <div class="popup" id="mealPopup">
        <div class="popup-content">
            <button class="close-btn" id="closePopup">&times;</button>
            <div class="popup-image" id="popupImage">
            </div>
            <h2 id="popupTitle">Gericht Name</h2>
            
            <div class="size-selection" id="sizeSelection" style="display: none;">
                <h4 id="sizeSelectionTitle">Bitte wählen Sie eine Größe:</h4>
                <div class="size-options" id="sizeOptions">
                </div>
            </div>

            <div class="price" id="popupPrice">€ 0,00</div>
            <p class="description" id="popupDescription" style="display: none;">Beschreibung des Gerichts...</p>
            
            <div class="ingredients-label" id="ingredientsLabel">Zutaten:</div>
            <p class="ingredients" id="popupIngredients"></p>
            
            <div class="tags" id="popupTags"></div>
            
            <button class="cart-popup-btn" id="cartPopupBtn" disabled>🛒 Bitte Größe wählen</button>
            
            <div class="allergens-section" id="allergensSection" style="display: none;">
                <h4 id="allergensTitle">Allergene</h4>
                <div class="allergens-content" id="allergensContent">
                </div>
            </div>

            <div class="additives-section" id="additivesSection" style="display: none;">
                <h4 id="additivesTitle">Zusatzstoffe</h4>
                <div class="additives-content" id="additivesContent">
                </div>
            </div>
        </div>
    </div>

    <div class="confirmation-popup" id="confirmationPopup">
        <div class="confirmation-content">
            <h3 id="confirmationTitle">In den Warenkorb legen?</h3>
            <p id="confirmationText">Möchten Sie dieses Gericht in den Warenkorb legen?</p>
            <div class="confirmation-buttons">
                <button class="confirm-btn confirm-ok" id="confirmOk">OK</button>
                <button class="confirm-btn confirm-no" id="confirmNo">Abbrechen</button>
            </div>
        </div>
    </div>

    <script>
        const translations = {
            de: {
                welcome: "Willkommen zu unserer digitalen Speisekarte",
                delivery: "🚗 Lieferung möglich",
                searchPlaceholder: "Gerichte durchsuchen...",
                allCategories: "Alle Kategorien",
                pizza: "Pizza",
                pasta: "Nudeln",
                salads: "Salate",
                gyros: "Gyros",
                cart: "Warenkorb",
                backToMenu: "Zurück zur Speisekarte",
                yourCart: "Ihr Warenkorb",
                emptyCart: "Ihr Warenkorb ist leer",
                total: "Gesamt",
                callNow: "Jetzt anrufen",
                clickToCall: "Klicken Sie hier, um zu bestellen",
                openingHours: "Öffnungszeiten",
                contact: "Kontakt",
                copyright: "© 2025 Bella Vista. Alle Rechte vorbehalten.",
                ingredients: "Zutaten",
                allergens: "Allergene",
                additives: "Zusatzstoffe",
                selectSize: "Größe wählen",
                ok: "OK",
                cancel: "Abbrechen",
                languageLabel: "Sprache",
                contactLabel: "Teilen",
                noItems: "Keine Gerichte gefunden",
                success: "Erfolg",
                addedToCart: "wurde zum Warenkorb hinzugefügt",
                addToCart: "In den Warenkorb",
                pleaseSelectSize: "Bitte Größe wählen",
                allSpecialWishes: "Alle Sonderwünsche",
                vegetarian: "Vegetarisch",
                spicy: "Scharf"
            },
            en: {
                welcome: "Welcome to our digital menu",
                delivery: "🚗 Delivery available",
                searchPlaceholder: "Search dishes...",
                allCategories: "All Categories",
                pizza: "Pizza",
                pasta: "Pasta",
                salads: "Salads",
                gyros: "Gyros",
                cart: "Cart",
                backToMenu: "Back to Menu",
                yourCart: "Your Cart",
                emptyCart: "Your cart is empty",
                total: "Total",
                callNow: "Call Now",
                clickToCall: "Click here to order",
                openingHours: "Opening Hours",
                contact: "Contact",
                copyright: "© 2025 Bella Vista. All rights reserved.",
                ingredients: "Ingredients",
                allergens: "Allergens",
                additives: "Additives",
                selectSize: "Select Size",
                ok: "OK",
                cancel: "Cancel",
                languageLabel: "Language",
                contactLabel: "Share",
                noItems: "No items found",
                success: "Success",
                addedToCart: "has been added to the cart",
                addToCart: "Add to Cart",
                pleaseSelectSize: "Please select a size",
                allSpecialWishes: "All Special Wishes",
                vegetarian: "Vegetarian",
                spicy: "Spicy"
            },
            tr: {
                welcome: "Dijital menümüze hoş geldiniz",
                delivery: "🚗 Teslimat mevcut",
                searchPlaceholder: "Yemek ara...",
                allCategories: "Tüm Kategoriler",
                pizza: "Pizza",
                pasta: "Makarna",
                salads: "Salatalar",
                gyros: "Gyros",
                cart: "Sepet",
                backToMenu: "Menüye Dön",
                yourCart: "Sepetiniz",
                emptyCart: "Sepetiniz boş",
                total: "Toplam",
                callNow: "Şimdi Ara",
                clickToCall: "Sipariş vermek için tıklayın",
                openingHours: "Açılış Saatleri",
                contact: "İletişim",
                copyright: "© 2025 Bella Vista. Tüm hakları saklıdır.",
                ingredients: "İçindekiler",
                allergens: "Alerjenler",
                additives: "Katkı Maddeleri",
                selectSize: "Boyut Seç",
                ok: "Tamam",
                cancel: "İptal",
                languageLabel: "Dil",
                contactLabel: "Paylaş",
                noItems: "Öğe bulunamadı",
                success: "Başarılı",
                addedToCart: "sepete eklendi",
                addToCart: "Sepete Ekle",
                pleaseSelectSize: "Lütfen bir boyut seçin",
                allSpecialWishes: "Tüm Özel İstekler",
                vegetarian: "Vejetaryen",
                spicy: "Acılı"
            },
            ar: {
                welcome: "مرحبًا بكم في قائمتنا الرقمية",
                delivery: "🚗 التوصيل متاح",
                searchPlaceholder: "البحث في الأطباق...",
                allCategories: "جميع الفئات",
                pizza: "بيتزا",
                pasta: "مكرونة",
                salads: "سلطات",
                gyros: "جيروس",
                cart: "عربة التسوق",
                backToMenu: "العودة إلى القائمة",
                yourCart: "عربة التسوق الخاصة بك",
                emptyCart: "عربة التسوق فارغة",
                total: "المجموع",
                callNow: "اتصل الآن",
                clickToCall: "انقر هنا للطلب",
                openingHours: "ساعات العمل",
                contact: "اتصل بنا",
                copyright: "© 2025 Bella Vista. جميع الحقوق محفوظة.",
                ingredients: "المكونات",
                allergens: "مسببات الحساسية",
                additives: "الإضافات",
                selectSize: "اختر الحجم",
                ok: "موافق",
                cancel: "إلغاء",
                languageLabel: "اللغة",
                contactLabel: "مشاركة",
                noItems: "لم يتم العثور على عناصر",
                success: "نجاح",
                addedToCart: "تمت الإضافة إلى عربة التسوق",
                addToCart: "أضف إلى العربة",
                pleaseSelectSize: "يرجى اختيار حجم",
                allSpecialWishes: "جميع الرغبات الخاصة",
                vegetarian: "نباتي",
                spicy: "حار"
            },
            ru: {
                welcome: "Добро пожаловать в наше цифровое меню",
                delivery: "🚗 Доставка доступна",
                searchPlaceholder: "Поиск блюд...",
                allCategories: "Все категории",
                pizza: "Пицца",
                pasta: "Паста",
                salads: "Салаты",
                gyros: "Гирос",
                cart: "Корзина",
                backToMenu: "Назад к меню",
                yourCart: "Ваша корзина",
                emptyCart: "Ваша корзина пуста",
                total: "Итого",
                callNow: "Позвонить сейчас",
                clickToCall: "Нажмите, чтобы заказать",
                openingHours: "Часы работы",
                contact: "Контакты",
                copyright: "© 2025 Bella Vista. Все права защищены.",
                ingredients: "Ингредиенты",
                allergens: "Аллергены",
                additives: "Добавки",
                selectSize: "Выберите размер",
                ok: "ОК",
                cancel: "Отмена",
                languageLabel: "Язык",
                contactLabel: "Поделиться",
                noItems: "Элементы не найдены",
                success: "Успех",
                addedToCart: "добавлено в корзину",
                addToCart: "Добавить в корзину",
                pleaseSelectSize: "Пожалуйста, выберите размер",
                allSpecialWishes: "Все особые пожелания",
                vegetarian: "Вегетарианское",
                spicy: "Острое"
            }
        };

        const menuData = [
            {
                id: 1,
                number: 1,
                name: {
                    de: "Pizza Margherita",
                    en: "Pizza Margherita",
                    tr: "Pizza Margherita",
                    ar: "بيتزا مارغريتا",
                    ru: "Пицца Маргарита"
                },
                category: "pizza",
                sizes: [
                    { 
                        size: { de: "Klein (22 cm)", en: "Small (22 cm)", tr: "Küçük (22 cm)", ar: "صغير (22 سم)", ru: "Маленькая (22 см)" }, 
                        price: 3.50, 
                        description: "22 cm" 
                    },
                    { 
                        size: { de: "Groß (28 cm)", en: "Large (28 cm)", tr: "Büyük (28 cm)", ar: "كبير (28 سم)", ru: "Большая (28 см)" }, 
                        price: 6.00, 
                        description: "28 cm" 
                    }
                ],
                ingredients: {
                    de: ["Tomatensauce", "Käse", "Oregano"],
                    en: ["Tomato sauce", "Cheese", "Oregano"],
                    tr: ["Domates sosu", "Peynir", "Kekik"],
                    ar: ["صلصة الطماطم", "جبن", "أوريجانو"],
                    ru: ["Томатный соус", "Сыр", "Орегано"]
                },
                tags: ["vegetarisch"],
                allergens: ["A", "F", "G", "J", "I", "H"],
                additives: ["2"]
            },
            {
                id: 2,
                number: 2,
                name: {
                    de: "Pizza Salami",
                    en: "Pizza Salami",
                    tr: "Pizza Salam",
                    ar: "بيتزا سلامي",
                    ru: "Пицца Салями"
                },
                category: "pizza",
                sizes: [
                    { 
                        size: { de: "Klein (22 cm)", en: "Small (22 cm)", tr: "Küçük (22 cm)", ar: "صغير (22 سم)", ru: "Маленькая (22 см)" }, 
                        price: 5.00, 
                        description: "22 cm" 
                    },
                    { 
                        size: { de: "Groß (28 cm)", en: "Large (28 cm)", tr: "Büyük (28 cm)", ar: "كبير (28 سم)", ru: "Большая (28 см)" }, 
                        price: 7.00, 
                        description: "28 cm" 
                    }
                ],
                ingredients: {
                    de: ["Tomatensauce", "Käse", "Oregano", "Salami"],
                    en: ["Tomato sauce", "Cheese", "Oregano", "Salami"],
                    tr: ["Domates sosu", "Peynir", "Kekik", "Salam"],
                    ar: ["صلصة الطماطم", "جبن", "أوريجانو", "سلامي"],
                    ru: ["Томатный соус", "Сыр", "Орегано", "Салями"]
                },
                tags: [],
                allergens: ["A", "F", "G", "J", "I", "H"],
                additives: ["1", "2", "3", "12"]
            },
            {
                id: 3,
                number: 79,
                name: {
                    de: "Alla Tonno",
                    en: "Alla Tonno",
                    tr: "Alla Tonno",
                    ar: "آلا تونو",
                    ru: "Алла Тонно"
                },
                category: "nudeln",
                price: 7.00,
                ingredients: {
                    de: ["Thunfisch", "Knoblauch", "Peperoni", "Tomaten-Sahnesauce"],
                    en: ["Tuna", "Garlic", "Pepperoni", "Tomato cream sauce"],
                    tr: ["Ton balığı", "Sarımsak", "Biber", "Domates kremalı sos"],
                    ar: ["تونة", "ثوم", "فلفل حار", "صلصة كريمة الطماطم"],
                    ru: ["Тунец", "Чеснок", "Пепперони", "Томатно-сливочный соус"]
                },
                tags: ["scharf"],
                allergens: ["A", "C", "D", "L", "N", "G"],
                additives: ["12"]
            },
            {
                id: 4,
                number: 80,
                name: {
                    de: "Napoli",
                    en: "Napoli",
                    tr: "Napoli",
                    ar: "نابولي",
                    ru: "Наполи"
                },
                category: "nudeln",
                price: 7.00,
                ingredients: {
                    de: ["Tomatensauce", "frischer Basilikum"],
                    en: ["Tomato sauce", "fresh basil"],
                    tr: ["Domates sosu", "taze fesleğen"],
                    ar: ["صلصة الطماطم", "ريحان طازج"],
                    ru: ["Томатный соус", "свежий базилик"]
                },
                tags: ["vegetarisch"],
                allergens: ["A", "C", "I", "J"],
                additives: ["7"]
            },
            {
                id: 5,
                number: 60,
                name: {
                    de: "Mista",
                    en: "Mista",
                    tr: "Mista",
                    ar: "ميستا",
                    ru: "Миста"
                },
                category: "salate",
                sizes: [
                    { 
                        size: { de: "Standard", en: "Standard", tr: "Standart", ar: "عادي", ru: "Стандарт" }, 
                        price: 4.00 
                    },
                    { 
                        size: { de: "Groß", en: "Large", tr: "Büyük", ar: "كبير", ru: "Большой" }, 
                        price: 6.00 
                    }
                ],
                ingredients: {
                    de: ["Bunter Salat mit Gurke"],
                    en: ["Mixed salad with cucumber"],
                    tr: ["Salatalıklı karışık salata"],
                    ar: ["سلطة مشكلة مع خيار"],
                    ru: ["Смешанный салат с огурцом"]
                },
                tags: ["vegetarisch"],
                allergens: [],
                additives: []
            },
            {
                id: 6,
                number: 61,
                name: {
                    de: "Caprese",
                    en: "Caprese",
                    tr: "Caprese",
                    ar: "كابريزي",
                    ru: "Капрезе"
                },
                category: "salate",
                sizes: [
                    { 
                        size: { de: "Standard", en: "Standard", tr: "Standart", ar: "عادي", ru: "Стандарт" }, 
                        price: 5.00 
                    },
                    { 
                        size: { de: "Groß", en: "Large", tr: "Büyük", ar: "كبير", ru: "Большой" }, 
                        price: 7.00 
                    }
                ],
                ingredients: {
                    de: ["Frische Tomaten", "Mozzarella", "Basilikum"],
                    en: ["Fresh tomatoes", "Mozzarella", "Basil"],
                    tr: ["Taze domates", "Mozzarella", "Fesleğen"],
                    ar: ["طماطم طازجة", "موتزاريلا", "ريحان"],
                    ru: ["Свежие помидоры", "Моцарелла", "Базилик"]
                },
                tags: ["vegetarisch"],
                allergens: [],
                additives: []
            },
            {
                id: 7,
                number: 169,
                name: {
                    de: "Gyros Pita",
                    en: "Gyros Pita",
                    tr: "Gyros Pita",
                    ar: "جيروس بيتا",
                    ru: "Гирос Пита"
                },
                category: "gyros",
                price: 7.00,
                ingredients: {
                    de: ["Gyros", "Krautsalat", "Zwiebeln", "Tzatziki"],
                    en: ["Gyros", "Coleslaw", "Onions", "Tzatziki"],
                    tr: ["Gyros", "Lahana salatası", "Soğan", "Tzatziki"],
                    ar: ["جيروس", "سلطة ملفوف", "بصل", "تزاتزيكي"],
                    ru: ["Гирос", "Салат из капусты", "Лук", "Дзадзики"]
                },
                tags: [],
                allergens: ["E", "F", "G", "H", "L", "M"],
                additives: ["2"]
            },
            {
                id: 8,
                number: 172,
                name: {
                    de: "Gyros Metaxa",
                    en: "Gyros Metaxa",
                    tr: "Gyros Metaxa",
                    ar: "جيروس ميتاكسا",
                    ru: "Гирос Метакса"
                },
                category: "gyros",
                price: 10.00,
                ingredients: {
                    de: ["Überbacken mit Metaxasauce", "Spinat"],
                    en: ["Baked with Metaxa sauce", "Spinach"],
                    tr: ["Metaxa soslu fırınlanmış", "Ispanak"],
                    ar: ["مخبوز مع صلصة ميتاكسا", "سبانخ"],
                    ru: ["Запеченный с соусом Метакса", "Шпинат"]
                },
                tags: [],
                allergens: ["L", "M", "G"],
                additives: ["1"]
            }
        ];

        const restaurantInfo = {
            name: "Bella Vista",
            phone: "02327 303687",
            address: "Weststraße 181",
            zip: "44866", 
            city: "Bochum Wattenscheid",
            hours: "Mo: 11:30 - 14:30 Uhr & 17:00 - 22:30 Uhr\nDi - Fr: 11:30 - 22:30 Uhr\nSa, So, Feiertage: 15:00 - 22:30 Uhr",
            deliveryAvailable: true
        };

        const allergenLegend = {
            'A': { de: 'Glutenhaltiges Getreide', en: 'Gluten-containing cereals', tr: 'Gluten içeren tahıllar', ar: 'حبوب تحتوي على الغلوتين', ru: 'Злаки, содержащие глютен' },
            'B': { de: 'Krebstiere', en: 'Crustaceans', tr: 'Kabuklu deniz ürünleri', ar: 'قشريات', ru: 'Ракообразные' },
            'C': { de: 'Eier', en: 'Eggs', tr: 'Yumurta', ar: 'بيض', ru: 'Яйца' },
            'D': { de: 'Fische', en: 'Fish', tr: 'Balık', ar: 'سمك', ru: 'Рыба' },
            'E': { de: 'Erdnüsse', en: 'Peanuts', tr: 'Yer fıstığı', ar: 'فول سوداني', ru: 'Арахис' },
            'F': { de: 'Sojabohnen', en: 'Soybeans', tr: 'Soya fasulyesi', ar: 'فول الصويا', ru: 'Соя' },
            'G': { de: 'Milch', en: 'Milk', tr: 'Süt', ar: 'حليب', ru: 'Молоко' },
            'H': { de: 'Schalenfrüchte', en: 'Tree nuts', tr: 'Kabuklu yemişler', ar: 'مكسرات', ru: 'Орехи' },
            'I': { de: 'Sellerie', en: 'Celery', tr: 'Kereviz', ar: 'كرفس', ru: 'Сельдерей' },
            'J': { de: 'Senf', en: 'Mustard', tr: 'Hardal', ar: 'خردل', ru: 'Горчица' },
            'K': { de: 'Sesamsamen', en: 'Sesame seeds', tr: 'Susam', ar: 'سمسم', ru: 'Кунжут' },
            'L': { de: 'Schwefeldioxid und Sulfite', en: 'Sulfur dioxide and sulfites', tr: 'Kükürt dioksit ve sülfitler', ar: 'ثاني أكسيد الكبريت والكبريتات', ru: 'Диоксид серы и сульфиты' },
            'M': { de: 'Lupinen', en: 'Lupins', tr: 'Acı bakla', ar: 'ترمس', ru: 'Люпин' },
            'N': { de: 'Weichtiere', en: 'Molluscs', tr: 'Yumuşakçalar', ar: 'رخويات', ru: 'Моллюски' }
        };

        const additiveLegend = {
            '1': { de: 'Farbstoff', en: 'Colorant', tr: 'Renklendirici', ar: 'ملون', ru: 'Краситель' },
            '2': { de: 'Konservierungsstoff', en: 'Preservative', tr: 'Koruyucu', ar: 'مادة حافظة', ru: 'Консервант' },
            '3': { de: 'Antioxidationsmittel', en: 'Antioxidant', tr: 'Antioksidan', ar: 'مضاد أكسدة', ru: 'Антиоксидант' },
            '4': { de: 'Geschwärzt', en: 'Blackened', tr: 'Karartılmış', ar: 'مسود', ru: 'Почерневший' },
            '7': { de: 'Phosphat', en: 'Phosphate', tr: 'Fosfat', ar: 'فوسفات', ru: 'Фосфат' },
            '8': { de: 'Geschmacksverstärker', en: 'Flavor enhancer', tr: 'Lezzet güçlendirici', ar: 'معزز نكهة', ru: 'Усилитель вкуса' },
            '9': { de: 'Formfleischvorderschinken', en: 'Formed meat ham', tr: 'Şekillendirilmiş et jambon', ar: 'لحم مشكل', ru: 'Формованная ветчина' },
            '10': { de: 'Süßungsmittel', en: 'Sweetener', tr: 'Tatlandırıcı', ar: 'محلي', ru: 'Подсластитель' },
            '11': { de: 'Säuerungsmittel', en: 'Acidifier', tr: 'Asitlik düzenleyici', ar: 'محمض', ru: 'Подкислитель' },
            '12': { de: 'Nitritpökelsalz & Nitrat', en: 'Nitrite curing salt & nitrate', tr: 'Nitrit tuzlama tuzu ve nitrat', ar: 'ملح نتريت ونترات', ru: 'Нитритная соль и нитрат' },
            '13': { de: 'Koffeinhaltig', en: 'Contains caffeine', tr: 'Kafein içerir', ar: 'يحتوي على كافيين', ru: 'Содержит кофеин' },
            '14': { de: 'Phenylananinquelle', en: 'Source of phenylalanine', tr: 'Fenilalanin kaynağı', ar: 'مصدر فينيل ألانين', ru: 'Источник фенилаланина' },
            '16': { de: 'Rindfleisch', en: 'Beef', tr: 'Sığır eti', ar: 'لحم بقر', ru: 'Говядина' }
        };

        let currentLanguage = localStorage.getItem('language') || 'de';
        let currentCategory = 'all';
        let currentSpecialWish = 'all';
        let currentSearch = '';
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        let currentMealId = null;
        let selectedSize = null;
        let pendingAddToCart = null;

        const menuGrid = document.getElementById('menuGrid');
        const cartItems = document.getElementById('cartItems');
        const mealPopup = document.getElementById('mealPopup');
        const cartView = document.getElementById('cartView');
        const menuView = document.getElementById('menuView');
        const cartTotal = document.getElementById('cartTotal');
        const mainControls = document.getElementById('mainControls');

        function t(key) {
            return translations[currentLanguage][key] || translations['de'][key] || key;
        }

        function updateUILanguage() {
            document.getElementById('headerWelcome').textContent = t('welcome');
            document.getElementById('deliveryBanner').textContent = t('delivery');
            document.getElementById('searchInput').placeholder = t('searchPlaceholder');
            document.getElementById('cartLabel').innerHTML = `${t('cart')} (<span id="cartCount">${cart.reduce((sum, item) => sum + item.quantity, 0)}</span>)`;
            document.getElementById('backToMenu').textContent = t('backToMenu');
            document.getElementById('cartTitle').textContent = t('yourCart');
            document.getElementById('cartPhoneBtn').textContent = `📞 ${t('callNow')}: 02327 303687`;
            document.getElementById('phoneInfo').textContent = t('clickToCall');
            document.getElementById('footerHoursTitle').textContent = t('openingHours');
            document.getElementById('footerCopyright').textContent = t('copyright');
            document.getElementById('ingredientsLabel').textContent = t('ingredients');
            document.getElementById('allergensTitle').textContent = t('allergens');
            document.getElementById('additivesTitle').textContent = t('additives');
            document.getElementById('sizeSelectionTitle').textContent = t('selectSize');
            document.getElementById('confirmOk').textContent = t('ok');
            document.getElementById('confirmNo').textContent = t('cancel');
            document.getElementById('langLabel').textContent = t('languageLabel');
            
            // Kategorien-Filter übersetzen
            const categoryFilter = document.getElementById('categoryFilter');
            categoryFilter.options[0].text = t('allCategories');
            categoryFilter.options[1].text = t('pizza');
            categoryFilter.options[2].text = t('pasta');
            categoryFilter.options[3].text = t('salads');
            categoryFilter.options[4].text = t('gyros');
            
            // Sonderwünsche-Filter übersetzen
            const specialWishesFilter = document.getElementById('specialWishesFilter');
            specialWishesFilter.options[0].text = t('allSpecialWishes');
            specialWishesFilter.options[1].text = t('vegetarian');
            specialWishesFilter.options[2].text = t('spicy');
            
            updateCartTotal();
        }

        function getDisplayPrice(meal) {
            if (meal.sizes && meal.sizes.length > 0) {
                const prices = meal.sizes.map(size => size.price);
                const minPrice = Math.min(...prices);
                const maxPrice = Math.max(...prices);
                if (minPrice === maxPrice) {
                    return `€ ${minPrice.toFixed(2)}`;
                }
                return `€ ${minPrice.toFixed(2)} - ${maxPrice.toFixed(2)}`;
            }
            return meal.price ? `€ ${meal.price.toFixed(2)}` : '€ 0,00';
        }

        function updateCartTotal() {
            const total = cart.reduce((sum, item) => {
                const meal = menuData.find(m => m.id === item.mealId);
                if (!meal) return sum;
                
                if (meal.sizes && meal.sizes.length > 0) {
                    const size = meal.sizes.find(s => {
                        const sizeText = typeof s.size === 'object' ? s.size[currentLanguage] : s.size;
                        return sizeText === item.selectedSize;
                    });
                    return sum + (size ? size.price * item.quantity : 0);
                }
                return sum + ((meal.price || 0) * item.quantity);
            }, 0);
            cartTotal.textContent = `${t('total')}: € ${total.toFixed(2)}`;
        }

        function updateCartCount() {
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cartCount').textContent = totalItems;
        }

        function getAllergenText(allergenCodes) {
            return allergenCodes.map(code => {
                const allergen = allergenLegend[code];
                return allergen ? (typeof allergen === 'object' ? allergen[currentLanguage] : allergen) : null;
            }).filter(text => text);
        }

        function getAdditiveText(additiveCodes) {
            return additiveCodes.map(code => {
                const additive = additiveLegend[code];
                return additive ? (typeof additive === 'object' ? additive[currentLanguage] : additive) : null;
            }).filter(text => text);
        }

        function toggleScrollToTopButton() {
            const scrollToTopBtn = document.getElementById('scrollToTopBtn');
            if (window.pageYOffset > 300) {
                scrollToTopBtn.style.display = 'flex';
            } else {
                scrollToTopBtn.style.display = 'none';
            }
        }

        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        function renderMenuItems() {
            menuGrid.innerHTML = '';
            
            if (menuData.length === 0) {
                menuGrid.innerHTML = `<div class="no-items">${t('noItems')}</div>`;
                return;
            }
            
            const filteredMeals = menuData.filter(meal => {
                const mealName = typeof meal.name === 'object' ? meal.name[currentLanguage] : meal.name;
                const mealIngredients = typeof meal.ingredients === 'object' ? meal.ingredients[currentLanguage] : meal.ingredients;
                
                const categoryMatch = currentCategory === 'all' || meal.category === currentCategory;
                const specialWishMatch = currentSpecialWish === 'all' || (meal.tags && meal.tags.includes(currentSpecialWish));
                const searchMatch = currentSearch === '' || 
                    mealName.toLowerCase().includes(currentSearch.toLowerCase()) ||
                    (mealIngredients && mealIngredients.some(ingredient => 
                        ingredient.toLowerCase().includes(currentSearch.toLowerCase())
                    ));
                
                return categoryMatch && specialWishMatch && searchMatch;
            });

            filteredMeals.forEach(meal => {
                const item = document.createElement('div');
                item.className = 'menu-item';
                item.onclick = () => openMealPopup(meal.id);
                
                const mealName = typeof meal.name === 'object' ? meal.name[currentLanguage] : meal.name;
                const mealIngredients = typeof meal.ingredients === 'object' ? meal.ingredients[currentLanguage] : meal.ingredients;
                
                const cartItem = cart.find(item => item.mealId === meal.id);
                const cartIndicator = cartItem ? `<div class="cart-indicator">${cartItem.quantity}x</div>` : '';
                
                const tagLabels = meal.tags.map(tag => {
                    if (tag === 'vegetarisch') return t('vegetarian');
                    if (tag === 'scharf') return t('spicy');
                    return tag;
                });
                
                item.innerHTML = `
                    <div class="menu-item-number">${meal.number}</div>
                    <h3>${mealName}</h3>
                    <div class="price">${getDisplayPrice(meal)}</div>
                    <div class="ingredients-label">${t('ingredients')}</div>
                    <p class="ingredients">${mealIngredients.join(', ')}</p>
                    <div class="tags">
                        ${meal.tags.map((tag, idx) => `<span class="tag ${tag}">${tagLabels[idx]}</span>`).join('')}
                        ${cartIndicator}
                    </div>
                `;
                
                menuGrid.appendChild(item);
            });
        }

        function renderCartItems() {
            cartItems.innerHTML = '';
            
            if (cart.length === 0) {
                cartItems.innerHTML = `<div class="no-items">${t('emptyCart')}</div>`;
                return;
            }
            
            cart.forEach((item, index) => {
                const meal = menuData.find(m => m.id === item.mealId);
                if (!meal) return;
                
                const mealName = typeof meal.name === 'object' ? meal.name[currentLanguage] : meal.name;
                
                const itemPrice = meal.sizes && meal.sizes.length > 0 ? 
                    meal.sizes.find(s => {
                        const sizeText = typeof s.size === 'object' ? s.size[currentLanguage] : s.size;
                        return sizeText === item.selectedSize;
                    })?.price || 0 : 
                    meal.price || 0;
                
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item';
                cartItem.innerHTML = `
                    <div class="cart-item-info">
                        <div class="cart-item-number">${meal.number}</div>
                        <div>
                            <div class="cart-item-name">${mealName}</div>
                            ${item.selectedSize ? `<div class="cart-item-size">${item.selectedSize}</div>` : ''}
                        </div>
                    </div>
                    <div class="cart-item-price">€ ${(itemPrice * item.quantity).toFixed(2)}</div>
                    <div class="cart-item-controls">
                        <button class="quantity-btn remove" onclick="removeFromCart(${index})">-</button>
                        <span class="item-quantity">${item.quantity}</span>
                        <button class="quantity-btn" onclick="addToCartFromCart(${index})">+</button>
                    </div>
                `;
                cartItems.appendChild(cartItem);
            });
            
            updateCartTotal();
        }

        function openMealPopup(mealId) {
            const meal = menuData.find(m => m.id === mealId);
            if (!meal) return;
            
            currentMealId = mealId;
            selectedSize = null;
            
            const mealName = typeof meal.name === 'object' ? meal.name[currentLanguage] : meal.name;
            const mealIngredients = typeof meal.ingredients === 'object' ? meal.ingredients[currentLanguage] : meal.ingredients;
            
            document.getElementById('popupTitle').textContent = mealName;
            document.getElementById('popupPrice').textContent = getDisplayPrice(meal);
            document.getElementById('popupIngredients').textContent = mealIngredients.join(', ');
            
            const imageQuery = `${mealName} ${meal.category}`;
            const popupImage = document.getElementById('popupImage');
            popupImage.innerHTML = `
                <img src="/placeholder.svg?height=200&width=500" alt="${mealName}">
                <div class="photo-type-badge">Beispielfoto</div>
            `;
            
            const popupTags = document.getElementById('popupTags');
            const tagLabels = meal.tags.map(tag => {
                if (tag === 'vegetarisch') return t('vegetarian');
                if (tag === 'scharf') return t('spicy');
                return tag;
            });
            popupTags.innerHTML = meal.tags.map((tag, idx) => `<span class="tag ${tag}">${tagLabels[idx]}</span>`).join('');
            
            const sizeSelection = document.getElementById('sizeSelection');
            const sizeOptions = document.getElementById('sizeOptions');
            
            if (meal.sizes && meal.sizes.length > 0) {
                sizeSelection.style.display = 'block';
                sizeOptions.innerHTML = '';
                
                meal.sizes.forEach((sizeOption, index) => {
                    const sizeDiv = document.createElement('div');
                    sizeDiv.className = 'size-option';
                    
                    const sizeText = typeof sizeOption.size === 'object' ? sizeOption.size[currentLanguage] : sizeOption.size;
                    
                    if (index === 0) {
                        sizeDiv.classList.add('selected');
                        selectedSize = sizeText;
                    }
                    
                    sizeDiv.innerHTML = `
                        <input type="radio" name="size" value="${sizeText}" ${index === 0 ? 'checked' : ''}>
                        <span class="size-label">${sizeText}</span>
                        <span class="size-price">€ ${sizeOption.price.toFixed(2)}</span>
                        ${sizeOption.description ? `<div class="size-description">${sizeOption.description}</div>` : ''}
                    `;
                    
                    sizeDiv.onclick = () => {
                        document.querySelectorAll('.size-option').forEach(opt => opt.classList.remove('selected'));
                        sizeDiv.classList.add('selected');
                        sizeDiv.querySelector('input').checked = true;
                        selectedSize = sizeText;
                        updateCartButtonState();
                    };
                    
                    sizeOptions.appendChild(sizeDiv);
                });
            } else {
                sizeSelection.style.display = 'none';
                selectedSize = null;
            }
            
            const allergensSection = document.getElementById('allergensSection');
            const allergensContent = document.getElementById('allergensContent');
            if (meal.allergens && meal.allergens.length > 0) {
                allergensSection.style.display = 'block';
                allergensContent.innerHTML = getAllergenText(meal.allergens)
                    .map(text => `<div class="allergen-item">${text}</div>`)
                    .join('');
            } else {
                allergensSection.style.display = 'none';
            }
            
            const additivesSection = document.getElementById('additivesSection');
            const additivesContent = document.getElementById('additivesContent');
            if (meal.additives && meal.additives.length > 0) {
                additivesSection.style.display = 'block';
                additivesContent.innerHTML = getAdditiveText(meal.additives)
                    .map(text => `<div class="additive-item">${text}</div>`)
                    .join('');
            } else {
                additivesSection.style.display = 'none';
            }
            
            updateCartButtonState();
            mealPopup.style.display = 'flex';
        }

        function updateCartButtonState() {
            const btn = document.getElementById('cartPopupBtn');
            if (selectedSize !== null || !menuData.find(m => m.id === currentMealId)?.sizes) {
                btn.disabled = false;
                btn.textContent = t('addToCart');
            } else {
                btn.disabled = true;
                btn.textContent = t('pleaseSelectSize');
            }
        }

        function addToCart() {
            if (!currentMealId) return;
            
            const meal = menuData.find(m => m.id === currentMealId);
            if (!meal) return;
            
            const existingItemIndex = cart.findIndex(item => 
                item.mealId === currentMealId && 
                item.selectedSize === selectedSize
            );
            
            if (existingItemIndex !== -1) {
                cart[existingItemIndex].quantity += 1;
            } else {
                cart.push({
                    mealId: currentMealId,
                    selectedSize: selectedSize,
                    quantity: 1
                });
            }
            
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount();
            closePopup();
            
            const mealName = typeof meal.name === 'object' ? meal.name[currentLanguage] : meal.name;
            showConfirmation(t('success'), `${mealName} ${t('addedToCart')}`);
        }

        function addToCartFromCart(index) {
            cart[index].quantity += 1;
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount();
            renderCartItems();
        }

        function removeFromCart(index) {
            if (cart[index].quantity > 1) {
                cart[index].quantity -= 1;
            } else {
                cart.splice(index, 1);
            }
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount();
            renderCartItems();
        }

        function clearCart() {
            cart = [];
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount();
            renderCartItems();
        }

        function showCartView() {
            menuView.style.display = 'none';
            cartView.style.display = 'block';
            mainControls.style.display = 'none';
            renderCartItems();
        }

        function showMenuView() {
            cartView.style.display = 'none';
            menuView.style.display = 'block';
            mainControls.style.display = 'flex';
        }

        function closePopup() {
            mealPopup.style.display = 'none';
            currentMealId = null;
            selectedSize = null;
        }

        function showConfirmation(title, text) {
            const popup = document.getElementById('confirmationPopup');
            document.getElementById('confirmationTitle').textContent = title;
            document.getElementById('confirmationText').textContent = text;
            popup.style.display = 'flex';
            
            document.getElementById('confirmOk').onclick = () => {
                popup.style.display = 'none';
            };
            
            document.getElementById('confirmNo').onclick = () => {
                popup.style.display = 'none';
            };
        }

        function switchLanguage(lang) {
            currentLanguage = lang;
            localStorage.setItem('language', lang);
            
            document.getElementById('languageSelect').value = lang;
            
            updateUILanguage();
            
            renderMenuItems();
            if (cartView.style.display === 'block') {
                renderCartItems();
            }
        }

        // Event Listeners
        document.getElementById('categoryFilter').addEventListener('change', (e) => {
            currentCategory = e.target.value;
            renderMenuItems();
        });

        document.getElementById('specialWishesFilter').addEventListener('change', (e) => {
            currentSpecialWish = e.target.value;
            renderMenuItems();
        });

        document.getElementById('searchInput').addEventListener('input', (e) => {
            currentSearch = e.target.value;
            renderMenuItems();
        });

        document.getElementById('showCart').addEventListener('click', showCartView);
        document.getElementById('backToMenu').addEventListener('click', showMenuView);
        document.getElementById('closePopup').addEventListener('click', closePopup);
        document.getElementById('cartPopupBtn').addEventListener('click', addToCart);
        document.getElementById('scrollToTopBtn').addEventListener('click', scrollToTop);

        document.getElementById('languageSelect').addEventListener('change', (e) => {
            switchLanguage(e.target.value);
        });

        mealPopup.addEventListener('click', (e) => {
            if (e.target === mealPopup) {
                closePopup();
            }
        });

        function init() {
            document.getElementById('restaurantName').textContent = restaurantInfo.name;
            document.getElementById('headerPhone').textContent = `📞 ${restaurantInfo.phone}`;
            document.getElementById('footerRestaurantName').textContent = restaurantInfo.name;
            document.getElementById('footerAddress').textContent = restaurantInfo.address;
            document.getElementById('footerZipCity').textContent = `${restaurantInfo.zip} ${restaurantInfo.city}`;
            
            document.getElementById('languageSelect').value = currentLanguage;

            updateUILanguage();
            renderMenuItems();
            updateCartCount();
            
            window.addEventListener('scroll', toggleScrollToTopButton);
            toggleScrollToTopButton();
        }

        init();
    </script>
</body>
</html>